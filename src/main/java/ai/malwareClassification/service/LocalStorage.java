package ai.malwareClassification.service;

import org.springframework.web.multipart.MultipartFile;

import java.io.File;
import java.io.IOException;
import java.util.UUID;

public class LocalStorage {
    public static String tmp_path = "C:/workspace/fileDir/tmp/";
    public static String purpose_path = "C:/workspace/fileDir/purpose/";
    public static String behavior_path = "C:/workspace/fileDir/behavior/";
    public static String test_file_path = "C:/workspace/fileDir/test/file_test.txt";
    public static String purpose_test_file_path = "C:/workspace/fileDir/test/purpose_test.txt";
    public static String behavior_test_file_path = "C:/workspace/fileDir/test/behavior_test.txt";

    public static String saveInLocalStorage(MultipartFile file, String signature, String path){
        String uploadFilename = signature + '_' + file.getOriginalFilename();

        if (!path.equals(tmp_path)){
            uploadFilename = UUID.randomUUID().toString() + '_' + uploadFilename;
        }

        String filePath = path + uploadFilename; //경로

        File dest = new File(filePath);
        try {
            file.transferTo(dest); // 파일 업로드 작업 수행
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
        return filePath;
    }

}
