package ai.malwareClassification.localSecondaryMemory;

import ai.malwareClassification.localSecondaryMemory.path.PathsForSaveFile;
import org.springframework.web.multipart.MultipartFile;

import java.io.File;
import java.io.IOException;
import java.util.UUID;

public class LocalMemoryUtils {
    private static String saveInLocalMemory(MultipartFile file, String savePath){
        String FileNameWithUUID = UUID.randomUUID().toString() + '_' + file.getOriginalFilename();
        String filePath = savePath + FileNameWithUUID;

        File dest = new File(filePath);
        try {
            file.transferTo(dest); // 파일 업로드 작업 수행
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
        return filePath;
    }

    public static String saveSoftwareInLocalMemory(MultipartFile file){
        return saveInLocalMemory(file, PathsForSaveFile.SOFTWARE.getPath());
    }

    public static String savePurposeInLocalMemory(MultipartFile file){
        return saveInLocalMemory(file, PathsForSaveFile.PURPOSE.getPath());
    }

    public static String saveBehaviorInLocalMemory(MultipartFile file){
        return saveInLocalMemory(file, PathsForSaveFile.BEHAVIOR.getPath());
    }
}
