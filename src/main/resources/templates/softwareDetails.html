<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:replace="/fragments/header.html :: fragment-header"></div>
</head>
<body>
    <div class="container">
        <div th:replace="/fragments/navbar.html :: fragment-navbar"></div>
        <div>
            <table class="table table-secondary table-bordered">
                <tbody>
                    <tr>
                        <th>시그니처:</th>
                        <td th:text="${softwareDetailsDTO.signature}"></td>
                    </tr>
                    <tr>
                        <th>파일이름:</th>
                        <td><a th:text="${softwareDetailsDTO.filename}" th:href="@{/software/{id}/download(id=${softwareDetailsDTO.id})}">파일 다운로드</a></td>
                    </tr>
                    <tr>
                        <th>업로드 날짜:</th>
                        <td th:text="${#temporals.format(softwareDetailsDTO.createdTime, 'yyyy-MM-dd HH:mm:SS')}"></td>
                    </tr>
                    <tr>
                        <th>업로더:</th>
                        <td th:text="${softwareDetailsDTO.uploaderName}"></td>
                    </tr>
                    <tr>
                        <th>닉네임:</th>
                        <td th:text="${softwareDetailsDTO.nickname}"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <br>
        <div>
            <form class="d-flex" th:action="@{|/software/${softwareDetailsDTO.id}|}" th:method="PATCH">
                <input class="form-control me-2" type="newNickname" aria-label="newNickname" name="newNickname">
                <button class="btn btn-outline-success" id="button-addon2" type="submit">닉네임변경</button>
            </form>
        </div>
        <br>
        <div>
            <form class="d-flex" th:action="@{|/software/${softwareDetailsDTO.id}|}" th:method="DELETE" th:if="${softwareDetailsDTO.uploaderId}==${loginUserId}">
                <input class="form-control me-2" type="hidden" aria-label="id" name="id" th:value="${softwareDetailsDTO.id}">
                <button class="btn btn-outline-success" type="submit">시그니처삭제</button>
            </form>
        </div>
        <br>
        <div>
            <div class="py-5 text-center">
                <h2>보고서 리스트</h2>
            </div>
            <table class="table">
                <thead>
                    <tr>
                        <th>id</th>
                        <th>title</th>
                        <th>uploader</th>
                        <th>filename</th>
                        <th>createdTime</th>
                        <th>modifiedTime</th>
                    </tr>
                <thead>
                <tbody>
                    <tr th:each="report: ${softwareDetailsDTO.reportDtoList}">
                        <td th:text="${report.id}"></td>
                        <td><a th:text="${report.title}" th:href="@{|/software/${softwareDetailsDTO.id}/report/${report.id}|}" /></td>
                        <td th:text="${report.uploader}"></td>
                        <td th:text="${report.filename}"></td>
                        <td th:text="${#temporals.format(report.createdTime, 'yyyy-MM-dd HH:mm:SS')}"></td>
                        <td th:text="${#temporals.format(report.modifiedTime, 'yyyy-MM-dd HH:mm:SS')}"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <br>
        <button class="btn btn-outline-success" th:onclick="|location.href='@{|/analyze/model1/${softwareDetailsDTO.id}|}'|">api 리포트</button>
        <button class="btn btn-outline-success" th:onclick="|location.href='@{|/software/${softwareDetailsDTO.id}/report-post|}'|">리포트 기재</button>
    </div>
</body>
</html>