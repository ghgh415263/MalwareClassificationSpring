<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:replace="/fragments/header.html :: fragment-header"></div>
</head>
<body>
    <div class="container">
        <div th:replace="/fragments/navbar.html :: fragment-navbar"></div>
        <div>
            <ol class="list-group list-group-numbered">
                <li th:text="@{|Signature: ${softwareDetailsDTO.signature}|}" class="list-group-item"></li>
                <li th:text="@{|발견시 파일 이름: ${softwareDetailsDTO.filename}|}" class="list-group-item"></li>
                <li th:text="@{|업로드 날짜: ${{softwareDetailsDTO.createdTime}}|}" class="list-group-item"></li>
                <li th:text="@{|업로더: ${{softwareDetailsDTO.uploaderName}}|}" class="list-group-item"></li>
                <li th:text="@{|닉네임: ${softwareDetailsDTO.nickname}|}" class="list-group-item"></li>
                <li class="list-group-item"><a th:href="@{/software/{id}/download(id=${softwareDetailsDTO.id})}">파일 다운로드</a></li>
            </ol>
        </div>
        <br>
        <div>
            <form class="d-flex" th:action="@{|/software/${softwareDetailsDTO.id}|}" th:method="PATCH">
                <input class="form-control me-2" type="newNickname" aria-label="newNickname" name="newNickname">
                <button class="btn btn-outline-success" id="button-addon2" type="submit">닉네임변경</button>
            </form>
        </div>
        <br>
        <div>
            <form class="d-flex" th:action="@{|/software/${softwareDetailsDTO.id}|}" th:method="DELETE" th:if="${softwareDetailsDTO.uploaderId}==${loginUserId}">
                <input class="form-control me-2" type="hidden" aria-label="id" name="id" th:value="${softwareDetailsDTO.id}">
                <button class="btn btn-outline-success" type="submit">시그니처삭제</button>
            </form>
        </div>
        <br>
        <div>
            <table class="table">
                <thead>
                <tr>
                    <th>분석보고서</th>
                </tr>
                <thead>
                <tbody>
                    <tr>
                        <td>id</td>
                        <td>title</td>
                        <td>uploader</td>
                        <td>filename</td>
                        <td>createdTime</td>
                        <td>modifiedTime</td>
                    </tr>
                    <tr th:each="report: ${softwareDetailsDTO.reportDtoList}">
                        <td th:text="${report.id}"></td>
                        <td><a th:text="${report.title}" th:href="@{|/software/${softwareDetailsDTO.id}/report/${report.id}|}" /></td>
                        <td th:text="${report.uploader}"></td>
                        <td th:text="${report.filename}"></td>
                        <td th:text="${#temporals.format(report.createdTime, 'yyyy-MM-dd HH:mm:SS')}"></td>
                        <td th:text="${#temporals.format(report.modifiedTime, 'yyyy-MM-dd HH:mm:SS')}"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <br>
        <button class="btn btn-outline-success" th:onclick="|location.href='@{|/analyze/model1/${softwareDetailsDTO.id}|}'|">api 리포트</button>
        <button class="btn btn-outline-success" th:onclick="|location.href='@{|/software/${softwareDetailsDTO.id}/report-post|}'|">리포트 기재</button>
    </div>
</body>
</html>