const usernameCheck = () => {

    const username = document.getElementById('username').value;
    let url = '/join/username-check?username=' +username;
    let options = {
        method: 'GET',
        mode: 'cors',
        headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json;charset=UTF-8'
        },
    };

    fetch(url, options)
        .then((response) => {
            if (response.ok) {
                return response.json()
            }
        })
        .then((result) => {
            if (result.isDuplicateName) {
                alert("이미 사용중인 아이디입니다.");
            } else {
                isUniqueName = true;
                alert("아이디를 사용해도 좋습니다.");
            }
        })
}  // todo 프론트 밸리데이션 유저 아이디

const $usernameOverlayButton = document.getElementById('usernameOverlay')
$usernameOverlayButton.addEventListener('click', (event) => {
    usernameCheck()
})

document.getElementById('username').addEventListener('propertychange', (event) => {
    isUniqueName = false;
})

document.getElementById('username').addEventListener('change', (event) => {
    isUniqueName = false;
})